<?xml version="1.0" encoding="utf-8"?>

<!--查询实体-->
<queryEntity id="111" title="测试标题111" rowsPerPage="10" maxPage="100" excelExport="true" exportMaxMum="123" 
	listDataDefaultDisplay="true" showCount="false" jndiDataSource="jdbc/basic" 
	queryViewFactory="queryViewFactoryDefaultImpl" 
	dataProvider="dataProviderDefaultImpl" >
	<!--列表信息-->
	<listData id="ID2">
		<listTable tableName="S_DEMO_QUERY_TATABLANDFIELD" filterSql="" orderBySql="LASTUPDATEDTIME desc">
			<columns>
				<!--获取当前行数据:{FIELDNAME}，获取当前上下文路径:{contextPath}-->
				<column metadataAttributedId="id" colName="TABLENAME" cname="表名" 
					url=":{contextPath}/test/dictbox.jsp?ID=:{FIELDNAME}" ignore="false"
					hidden="false"  
					isExpot="false"/>
           		<!--sys="true" 系统字段示例-->
           		<column colName="DELETEFLAG" cname="删除标志" sys="true"/>
           		<!--dbType="int" 影响前台排序方式-->
				<column metadataAttributedId="id" colName="NO" cname="号码" dbType="int"/>  
				<column colName="FIELDNAME" cname="字段英文名" />
				<column colName="FIELDCNNAME" cname="字段中文名" />
				<!--字典翻译示例-->
				<column colName="LASTUPDATEDBY" cname="修改人"
					dictKind="sql" 
					dictExpression="select USERID as code ,USERNAME as detail from S_USER"/>
				<column colName="LASTUPDATEDTIME" cname="修改时间" dateFormat="yyyy-MM-dd"/>
				<!--伪列示例-->
				<column colName="CZ" cname="操作" ignore="true" isExpot="false"
					output="&lt;input type='button' class='button' value='操作' onClick=alert(':{FIELDNAME}') &gt;" />  
			</columns>
			<!--操作-->
			<operations>
				<operation name="操作名称1111" selectType="1" 
						   viewComponentEvaluator="" >
					<!--支持表达式获取动态参数，系统参数，已选择的行的数据(SELECTEDROW.XXX，字典的伪SELECTEDROW.XXX.CODE)-->
					<jsAction>  
            			alert(SELECTEDROW.LASTUPDATEDBY.CODE);
					</jsAction>
				</operation>
				<operation name="操作名称2" selectType="2" viewComponentEvaluator="">
					<!--支持表达式获取动态参数，系统参数，已选择的行的数据-->
					<jsAction>
					<![CDATA[alert(SELECTEDROW.DELETEFLAG);]]> 
					</jsAction>
				</operation>    
			</operations>
		</listTable>
	</listData>
  
	<!--通用快速查询
	<quickquerys>
		<quickQuery label="修改时间" colName="LASTUPDATEDTIME" viewComponent="quickQueryForTest"/>
	</quickquerys>
	-->
	
	<!--单选纽快速查询-->
	<radioGroupQuery>
		<group groupLabel="修改时间">
			<option label="本月" 
					querySql="LASTUPDATEDTIME&gt;=to_date(':{DateUtils.getFirstDayOfMonth()}','yyyy-MM-dd') 
					and LASTUPDATEDTIME&lt;=to_date(':{DateUtils.getLastDayOfMonth()}','yyyy-MM-dd')" />
			<option label="上月" 
					querySql="LASTUPDATEDTIME&gt;=to_date(':{DateUtils.getPreviousMonthFirst()}','yyyy-MM-dd') 
					and LASTUPDATEDTIME&lt;=to_date(':{DateUtils.getPreviousMonthLast()}','yyyy-MM-dd')" />
			<option label="本年" 
					querySql="LASTUPDATEDTIME&gt;=to_date(':{DateUtils.getCurrentYearFirst()}','yyyy-MM-dd') 
					and LASTUPDATEDTIME&lt;=to_date(':{DateUtils.getCurrentYearEnd()}','yyyy-MM-dd')" />
		</group>
	</radioGroupQuery>
	
  
	<!--查询条件-->
	<queryConditions>
		<!--普通查询条件-->
		<queryCondition metadataAttributedId="id" colName="NO" cname="号码" 
			ignore="false"
			required="false"
			matchMode="left" 
			queryOperation="like"
			inputType="string"/>
		<!--静态字典查询条件示例-->
		<queryCondition metadataAttributedId="id" colName="FIELDNAME" cname="字典英文名" 
			ignore="false"
			required="false"
			matchMode="left" 
			queryOperation="like"
			dictKind="dict" dictExpression="001" dictInputType="combobox"
			inputType="dict"/>
		<!--日期型查询条件示例-->
		<queryCondition colName="LASTUPDATEDTIME" cname="时间" dbType="date"
			inputType="dateRange"/>
		<!--动态字典查询条件示例-->	
		<queryCondition metadataAttributedId="id" colName="FIELDCNNAME" cname="动态字典" 
			ignore="false"
			required="false"
			matchMode="left" 
			queryOperation="like"
			dictKind="sql" dictExpression="select userid as code,username as detail,'' as spell from s_user where userid='${request.customParam}'" 
			dictInputType="combobox"
			inputType="dict" viewComponent="queryConditionDictForTest"/>
    
	</queryConditions>
	<!--查询规则示例-->
	<queryRules>
		<queryRule condition="FIELDNAME;NO">
			<ruleExp>
				<!--
				支持表达式获取动态参数，系统参数，查询条件值 ，${request.queryCondition_XXX}表示 查询条件输入框的值，
				如${request.queryCondition_NO}表示查询条件中配置的NO的条件框的值
				-->
          		select * from S_DEMO_QUERY_TATABLANDFIELD where TABLENAME='B_ASJ_JQ' and NO='${request.queryCondition_NO}'
			</ruleExp>
		</queryRule>
	</queryRules>
    
    <!--引入外部JS示例-->
	<refs>
		<js-ref>	
      		${contextPath}/js/simple-query.js
		</js-ref>
	</refs>
    
</queryEntity>
  